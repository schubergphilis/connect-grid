(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v={}.hasOwnProperty,w=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};i={is_unordered:!1,is_counting:!1,is_exclusive:!1,is_solitary:!1,prevent_default:!1,prevent_repeat:!1},t=["meta","alt","option","ctrl","shift","cmd"],r="ctrl",b={},b.debug=!1,a=function(){function a(a){var b,c;for(b in a)v.call(a,b)&&(c=a[b],c!==!1&&(this[b]=c));this.keys=this.keys||[],this.count=this.count||0}return a.prototype.allows_key_repeat=function(){return!this.prevent_repeat&&"function"==typeof this.on_keydown},a.prototype.reset=function(){return this.count=0,this.keyup_fired=null},a}(),b.Listener=function(){function b(a,b){var c,d,e;this.should_suppress_event_defaults=!1,this.should_force_event_defaults=!1,this.sequence_delay=800,this._registered_combos=[],this._keys_down=[],this._active_combos=[],this._sequence=[],this._sequence_timer=null,this._prevent_capture=!1,this._defaults=b||{};for(d in i)v.call(i,d)&&(e=i[d],this._defaults[d]=this._defaults[d]||e);a=a||document.body,c=function(a,b,c){return a.addEventListener?a.addEventListener(b,c):a.attachEvent?a.attachEvent("on"+b,c):void 0},c(a,"keydown",function(a){return function(b){return b=b||window.event,a._receive_input(b,!0),a._bug_catcher(b)}}(this)),c(a,"keyup",function(a){return function(b){return b=b||window.event,a._receive_input(b,!1)}}(this)),c(window,"blur",function(a){return function(){var b,c,d,e;for(e=a._keys_down,c=0,d=e.length;d>c;c++)b=e[c],a._key_up(b,{});return a._keys_down=[]}}(this))}return b.prototype._bug_catcher=function(a){var b;return"cmd"===r&&w.call(this._keys_down,"cmd")>=0&&"cmd"!==(b=f(a.keyCode))&&"shift"!==b&&"alt"!==b&&"caps"!==b&&"tab"!==b?this._receive_input(a,!1):void 0},b.prototype._cmd_bug_check=function(a){return"cmd"===r&&w.call(this._keys_down,"cmd")>=0&&w.call(a,"cmd")<0?!1:!0},b.prototype._prevent_default=function(a,b){return(b||this.should_suppress_event_defaults)&&!this.should_force_event_defaults&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation)?a.stopPropagation():void 0},b.prototype._get_active_combos=function(a){var b,c;return b=[],c=j(this._keys_down,function(b){return b!==a}),c.push(a),this._match_combo_arrays(c,function(a){return function(c){return a._cmd_bug_check(c.keys)?b.push(c):void 0}}(this)),this._fuzzy_match_combo_arrays(c,function(a){return function(c){return w.call(b,c)>=0?void 0:!c.is_solitary&&a._cmd_bug_check(c.keys)?b.push(c):void 0}}(this)),b},b.prototype._get_potential_combos=function(a){var b,c,d,e,f;for(c=[],f=this._registered_combos,d=0,e=f.length;e>d;d++)b=f[d],b.is_sequence||w.call(b.keys,a)>=0&&this._cmd_bug_check(b.keys)&&c.push(b);return c},b.prototype._add_to_active_combos=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(i=!1,h=!0,e=!1,w.call(this._active_combos,a)>=0)return!0;if(this._active_combos.length)for(g=j=0,o=this._active_combos.length;o>=0?o>j:j>o;g=o>=0?++j:--j)if(b=this._active_combos[g],b&&b.is_exclusive&&a.is_exclusive){if(d=b.keys,!i)for(k=0,m=d.length;m>k;k++)if(c=d[k],i=!0,w.call(a.keys,c)<0){i=!1;break}if(h&&!i)for(p=a.keys,l=0,n=p.length;n>l;l++)if(f=p[l],h=!1,w.call(d,f)<0){h=!0;break}i&&(e?(b=this._active_combos.splice(g,1)[0],null!=b&&b.reset()):(b=this._active_combos.splice(g,1,a)[0],null!=b&&b.reset(),e=!0),h=!1)}return h&&this._active_combos.unshift(a),i||h},b.prototype._remove_from_active_combos=function(a){var b,c,d,e;for(c=d=0,e=this._active_combos.length;e>=0?e>d:d>e;c=e>=0?++d:--d)if(b=this._active_combos[c],b===a){a=this._active_combos.splice(c,1)[0],a.reset();break}},b.prototype._get_possible_sequences=function(){var a,b,c,d,e,f,g,h,i,k,l,m,n;for(e=[],l=this._registered_combos,g=0,k=l.length;k>g;g++)for(a=l[g],c=h=1,m=this._sequence.length;m>=1?m>=h:h>=m;c=m>=1?++h:--h)if(f=this._sequence.slice(-c),a.is_sequence&&(!(w.call(a.keys,"shift")<0)||(f=j(f,function(a){return"shift"!==a}),f.length))){for(b=i=0,n=f.length;n>=0?n>i:i>n;b=n>=0?++i:--i){if(a.keys[b]!==f[b]){d=!1;break}d=!0}d&&e.push(a)}return e},b.prototype._add_key_to_sequence=function(a,b){var c,d,e,f;if(this._sequence.push(a),d=this._get_possible_sequences(),d.length){for(e=0,f=d.length;f>e;e++)c=d[e],this._prevent_default(b,c.prevent_default);this._sequence_timer&&clearTimeout(this._sequence_timer),this.sequence_delay>-1&&(this._sequence_timer=setTimeout(function(){return this._sequence=[]},this.sequence_delay))}else this._sequence=[]},b.prototype._get_sequence=function(a){var b,c,d,e,f,g,h,i,k,l,m,n,o;for(m=this._registered_combos,h=0,l=m.length;l>h;h++)if(b=m[h],b.is_sequence){for(d=i=1,n=this._sequence.length;n>=1?n>=i:i>=n;d=n>=1?++i:--i)if(g=j(this._sequence,function(a){return w.call(b.keys,"shift")>=0?!0:"shift"!==a}).slice(-d),b.keys.length===g.length)for(c=k=0,o=g.length;o>=0?o>k:k>o;c=o>=0?++k:--k)if(f=g[c],!(w.call(b.keys,"shift")<0&&"shift"===f||"shift"===a&&w.call(b.keys,"shift")<0)){if(b.keys[c]!==f){e=!1;break}e=!0}if(e)return b}return!1},b.prototype._receive_input=function(a,b){var c;return this._prevent_capture?void(this._keys_down.length&&(this._keys_down=[])):(c=f(a.keyCode),(b||this._keys_down.length||"alt"!==c&&c!==r)&&c?b?this._key_down(c,a):this._key_up(c,a):void 0)},b.prototype._fire=function(a,b,c,d){return"function"==typeof b["on_"+a]&&this._prevent_default(c,b["on_"+a].call(b["this"],c,b.count,d)!==!0),"release"===a&&(b.count=0),"keyup"===a?b.keyup_fired=!0:void 0},b.prototype._match_combo_arrays=function(a,b){var c,f,g,h;for(h=this._registered_combos,f=0,g=h.length;g>f;f++)c=h[f],(!c.is_unordered&&e(a,c.keys)||c.is_unordered&&d(a,c.keys))&&b(c)},b.prototype._fuzzy_match_combo_arrays=function(a,b){var c,d,e,f;for(f=this._registered_combos,d=0,e=f.length;e>d;d++)c=f[d],(!c.is_unordered&&l(c.keys,a)||c.is_unordered&&k(c.keys,a))&&b(c)},b.prototype._keys_remain=function(a){var b,c,d,e,f;for(f=a.keys,d=0,e=f.length;e>d;d++)if(b=f[d],w.call(this._keys_down,b)>=0){c=!0;break}return c},b.prototype._key_down=function(a,b){var c,d,e,f,h,i,j,k,l,m,n,o,p,q,t;l=g(a,b),l&&(a=l),this._add_key_to_sequence(a,b),k=this._get_sequence(a),k&&this._fire("keydown",k,b);for(h in s)e=s[h],b[e]&&(h===a||w.call(this._keys_down,h)>=0||this._keys_down.push(h));for(h in s)if(e=s[h],h!==a&&w.call(this._keys_down,h)>=0&&!b[e]){if("cmd"===h&&"cmd"!==r)continue;for(f=m=0,t=this._keys_down.length;t>=0?t>m:m>t;f=t>=0?++m:--m)this._keys_down[f]===h&&this._keys_down.splice(f,1)}for(d=this._get_active_combos(a),j=this._get_potential_combos(a),n=0,p=d.length;p>n;n++)c=d[n],this._handle_combo_down(c,j,a,b);if(j.length)for(o=0,q=j.length;q>o;o++)i=j[o],this._prevent_default(b,i.prevent_default);w.call(this._keys_down,a)<0&&this._keys_down.push(a)},b.prototype._handle_combo_down=function(a,b,c,d){var e,f,g,h,i,j;if(w.call(a.keys,c)<0)return!1;if(this._prevent_default(d,a&&a.prevent_default),e=!1,w.call(this._keys_down,c)>=0&&(e=!0,!a.allows_key_repeat()))return!1;if(h=this._add_to_active_combos(a,c),a.keyup_fired=!1,f=!1,a.is_exclusive)for(i=0,j=b.length;j>i;i++)if(g=b[i],g.is_exclusive&&g.keys.length>a.keys.length){f=!0;break}return!f&&(a.is_counting&&"function"==typeof a.on_keydown&&(a.count+=1),h)?this._fire("keydown",a,d,e):void 0},b.prototype._key_up=function(a,b){var c,d,e,f,h,i,j,k,l,m,n,o,q,r,s,t,u,v,x;if(k=a,j=g(a,b),j&&(a=j),j=p[k],b.shiftKey?j&&w.call(this._keys_down,j)>=0||(a=k):k&&w.call(this._keys_down,k)>=0||(a=j),i=this._get_sequence(a),i&&this._fire("keyup",i,b),w.call(this._keys_down,a)<0)return!1;for(h=l=0,t=this._keys_down.length;t>=0?t>l:l>t;h=t>=0?++l:--l)if((u=this._keys_down[h])===a||u===j||u===k){this._keys_down.splice(h,1);break}for(d=this._active_combos.length,f=[],v=this._active_combos,m=0,q=v.length;q>m;m++)c=v[m],w.call(c.keys,a)>=0&&f.push(c);for(n=0,r=f.length;r>n;n++)e=f[n],this._handle_combo_up(e,b,a);if(d>1)for(x=this._active_combos,o=0,s=x.length;s>o;o++)c=x[o],void 0===c||w.call(f,c)>=0||this._keys_remain(c)||this._remove_from_active_combos(c)},b.prototype._handle_combo_up=function(a,b,c){var e,f;this._prevent_default(b,a&&a.prevent_default),f=this._keys_remain(a),a.keyup_fired||(e=this._keys_down.slice(),e.push(c),(!a.is_solitary||d(e,a.keys))&&(this._fire("keyup",a,b),a.is_counting&&"function"==typeof a.on_keyup&&"function"!=typeof a.on_keydown&&(a.count+=1))),f||(this._fire("release",a,b),this._remove_from_active_combos(a))},b.prototype.simple_combo=function(a,b){return this.register_combo({keys:a,on_keydown:b})},b.prototype.counting_combo=function(a,b){return this.register_combo({keys:a,is_counting:!0,is_unordered:!1,on_keydown:b})},b.prototype.sequence_combo=function(a,b){return this.register_combo({keys:a,on_keydown:b,is_sequence:!0})},b.prototype.register_combo=function(b){var c,d,e,f;"string"==typeof b.keys&&(b.keys=b.keys.split(" ")),f=this._defaults;for(d in f)v.call(f,d)&&(e=f[d],void 0===b[d]&&(b[d]=e));return c=new a(b),u(c)?(this._registered_combos.push(c),c):void 0},b.prototype.register_many=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.register_combo(b));return e},b.prototype.unregister_combo=function(a){var b,c,f,g,h;if(!a)return!1;if(c=function(a){return function(b){var c,d,e,f;for(f=[],c=d=0,e=a._registered_combos.length;e>=0?e>d:d>e;c=e>=0?++d:--d){if(b===a._registered_combos[c]){a._registered_combos.splice(c,1);break}f.push(void 0)}return f}}(this),a.keys)return c(a);for(h=this._registered_combos,f=0,g=h.length;g>f;f++){b=h[f]}return"string"==typeof a&&(a=a.split(" ")),b.is_unordered&&d(a,b.keys)||!b.is_unordered&&e(a,b.keys)?c(b):void 0},b.prototype.unregister_many=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.unregister_combo(b));return e},b.prototype.get_registered_combos=function(){return this._registered_combos},b.prototype.reset=function(){return this._registered_combos=[]},b.prototype.listen=function(){return this._prevent_capture=!1},b.prototype.stop_listening=function(){return this._prevent_capture=!0},b.prototype.get_meta_key=function(){return r},b}(),h=function(){-1!==navigator.userAgent.indexOf("Mac OS X")&&(r="cmd")},c=function(){-1!==navigator.userAgent.indexOf("Opera")&&(o[17]="cmd")},f=function(a){return o[a]},j=function(a,b){var c;return a.filter?a.filter(b):function(){var d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],b(c)&&f.push(c);return f}()},d=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(d=0,e=a.length;e>d;d++)if(c=a[d],!(w.call(b,c)>=0))return!1;return!0},e=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(c=d=0,e=a.length;e>=0?e>d:d>e;c=e>=0?++d:--d)if(a[c]!==b[c])return!1;return!0},k=function(a,b){var c,d,e;for(d=0,e=a.length;e>d;d++)if(c=a[d],w.call(b,c)<0)return!1;return!0},l=function(a,b){var c,d,e,f,g;for(e=0,f=0,g=a.length;g>f;f++){if(d=a[f],c=b.indexOf(d),!(c>=e))return!1;e=c}return!0},q=function(){return b.debug?console.log.apply(console,arguments):void 0},m=function(a){var b,c,d;b=!1;for(d in o)if(c=o[d],a===c){b=!0;break}if(!b)for(d in p)if(c=p[d],a===c){b=!0;break}return b},u=function(a){var b,c,d,e,f,g,h,j,k,l,o,p,s,u,v;for(h=!0,a.keys.length||q("You're trying to bind a combo with no keys:",a),c=k=0,u=a.keys.length;u>=0?u>k:k>u;c=u>=0?++k:--k)d=a.keys[c],b=n[d],b&&(d=a.keys[c]=b),"meta"===d&&a.keys.splice(c,1,r),"cmd"===d&&q('Warning: use the "meta" key rather than "cmd" for Windows compatibility');for(v=a.keys,l=0,p=v.length;p>l;l++)d=v[l],m(d)||(q('Do not recognize the key "'+d+'"'),h=!1);if(w.call(a.keys,"meta")>=0||w.call(a.keys,"cmd")>=0){for(f=a.keys.slice(),o=0,s=t.length;s>o;o++)e=t[o],(c=f.indexOf(e))>-1&&f.splice(c,1);f.length>1&&(q("META and CMD key combos cannot have more than 1 non-modifier keys",a,f),h=!1)}for(g in a)j=a[g],"undefined"===i[g]&&q("The property "+g+" is not a valid combo property. Your combo has still been registered.");return h},g=function(a,b){var c;return b.shiftKey?(c=p[a],null!=c?c:!1):!1},s={cmd:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"},n={escape:"esc",control:"ctrl",command:"cmd","break":"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"},p={"/":"?",".":">",",":"<","'":'"',";":":","[":"{","]":"}","\\":"|","`":"~","=":"+","-":"_",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")"},o={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",225:"alt",57392:"ctrl",63289:"num"},h(),c(),window.keypress=b}).call(this),window.angular.module("connect-grid",[]),function(a,b,c){"use strict";a.module("connect-grid").directive("gridActiveCell",[function(){return{restrict:"E",require:"?ngModel",scope:!0,link:function(a,d,e,f){var g=new b.Listener(d.parent()[0]),h=[{keys:"right",on_keydown:function(){a.moveActiveCellRelative(0,1)}},{keys:"left",on_keydown:function(){a.moveActiveCellRelative(0,-1)}},{keys:"up",on_keydown:function(){a.moveActiveCellRelative(-1,0)}},{keys:"down",on_keydown:function(){a.moveActiveCellRelative(1,0)}},{keys:"tab",is_solitary:!0,on_keydown:function(){a.moveActiveCellRelative(0,1)}},{keys:"shift tab",is_solitary:!0,on_keydown:function(){a.moveActiveCellRelative(0,-1)}},{keys:"enter",on_keydown:function(){return a.gridOptions.editable?void a.setActiveMode(!0):!1}},{keys:"backspace",on_keydown:function(){if(!a.gridOptions.editable)return!1;var b=a.activeCellModel.row,c=a.activeCellModel.column,d=a.getCellValue(b,c);a.setCellValue(""),a.gridOptions.onCellValueChange(a.getRow(b),a.getColumnName(c),"",d)}}];"activeCellKeyBindings"in a.gridOptions&&c.each(c.keys(a.gridOptions.activeCellKeyBindings),function(b){var c=a.gridOptions.activeCellKeyBindings[b];h.push({keys:b,on_keydown:function(){var b=a.activeCellModel.row,d=a.activeCellModel.column;c(a.getRow(b),a.getColumnName(d),a.getCellValue(b,d))}})}),g.register_many(h),d.on("dblclick",function(){a.setActiveMode(!0)}),a.$on("active-cell-set",function(){a.$$phase||a.$digest()}),a.isReadingInput=!1,a.isInEditMode=!1,a.editModeInputBuffer=null,a.setEditModeInputBuffer=function(b){a.editModeInputBuffer=b},a.setActiveMode=function(b){return a.gridOptions.editable&&a.isColumnEditable(a.activeCellModel.column)?(a.isInEditMode=b,b?g.stop_listening():g.listen(),void(a.$$phase||a.$apply())):!1},a.$on("activateCellEditor",function(b,c){a.setActiveMode(!0),c.value&&(a.editModeInputBuffer=c.value)}),a.moveActiveCellRelative=function(b,c){a.isInEditMode||(a.setActiveCell(f.$modelValue.row+b,f.$modelValue.column+c),a.$$phase||a.$digest())},a.activeCellTop=function(){var b=a.getCellCoordinates(f.$modelValue.row,f.$modelValue.column);return b.top+a.gridOptions.activeCellModifiers.top},a.activeCellLeft=function(){var b=a.getCellCoordinates(a.activeCellModel.row,a.activeCellModel.column);return b.left+a.gridOptions.activeCellModifiers.left},a.activeCellWidth=function(){var b=a.getCellCoordinates(f.$modelValue.row,f.$modelValue.column);return b.width+a.gridOptions.activeCellModifiers.width},a.activeCellHeight=function(){var b=a.getCellCoordinates(f.$modelValue.row,f.$modelValue.column);return b.height+a.gridOptions.activeCellModifiers.height},a.activeCellValue=function(){return a.getCellValue(f.$modelValue.row,f.$modelValue.column)},a.setCellValue=function(b){a.updateCellValue(f.$modelValue.row,f.$modelValue.column,b),a.$$phase||a.$apply()},a.$on("is-reading-input-change",function(b,c){a.isReadingInput=c,a.$$phase||a.$digest()})},template:'<div class="grid__active-cell" ng-style="{ top: px(activeCellTop()), left: px(activeCellLeft()), width: px(activeCellWidth()), height: px(activeCellHeight()) }"><grid-cell-editor ng-repeat="col in columns()" ng-model="col" column="{{ $index }}"/></div>'}}])}(window.angular,window.keypress,window._),function(a){"use strict";a.module("connect-grid").directive("activeCellHint",[function(){return{restrict:"E",scope:!0,link:function(a,b){a.activeCellBottom=function(){var b=a.getCellCoordinates(a.activeCellModel.row,a.activeCellModel.column);return b.top+a.gridOptions.activeCellModifiers.top+b.height-a.scrollTop},a.activeCellLeft=function(){var c=a.getCellCoordinates(a.activeCellModel.row,a.activeCellModel.column),d=c.left+a.gridOptions.activeCellModifiers.left-a.scrollLeft,e=b[0].getElementsByClassName("active-cell-hint")[0].offsetWidth,f=d+e,g=a.getDimensionsLimiterWidth();return f>g&&(d-=f-g),d},a.isHintVisible=function(){return!a.isScrolling&&a.getIfHintVisible(a.activeCellModel.row,a.activeCellModel.column)},a.hintTemplateSrc=function(){return a.getHintTemplateSrc(a.activeCellModel.row,a.activeCellModel.column)},a.value=function(){return a.getCellValue(a.activeCellModel.row,a.activeCellModel.column)},a.column=function(){return a.columns()[a.activeCellModel.column]},a.row=function(){return a.getRow(a.activeCellModel.row)},a.$on("active-cell-set",function(){a.$$phase||a.$digest()}),a.$on("grid-is-scrolling",function(){a.$$phase||a.$digest()})},template:'<div class="active-cell-hint" ng-style="{ top: px(activeCellBottom()), left: px(activeCellLeft())}"><div ng-if="isHintVisible()" ng-include="hintTemplateSrc()"></div> </div>'}}])}(window.angular),function(a){"use strict";a.module("connect-grid").directive("gridCell",[function(){return{restrict:"E",require:"?ngModel",link:function(a,b,c){var d=a.getCompiledColumnCellTemplate(c.column);a.cellIsChangedSinceRender=!1,a.$on("cell-value-changed-"+a.$parent.$index+"-"+a.$index,function(){a.cellIsChangedSinceRender=!0}),d&&b.find("span").replaceWith(d(a)),b.on("click",function(){a.setActiveCell(c.row,c.column)})},template:'<div class="grid__cell__content {{ getCellClass($parent.$index, $index) }}"\n     ng-class="{ \'grid__cell--nonselectable\': !isColumnSelectable($index), \'grid__cell--noneditable\': !isColumnEditable($index) }"\n     ng-style="{ height: px(gridOptions.headerCellHeight) }">\n    <span class="ng-grid__cell__content-wrap">\n        <span ng-if="cellIsChangedSinceRender">{{ renderCellContent($parent.$parent.$index, $parent.$index) }}</span>\n        <span ng-if="!cellIsChangedSinceRender">{{ ::renderCellContent($parent.$parent.$index, $parent.$index) }}</span>\n    </span>\n</div>'}}])}(window.angular),function(a,b){"use strict";b.module("connect-grid").directive("gridCellEditor",["$timeout",function(b){return{restrict:"E",compile:function(){return function(c,d,e){var f=c.getCompiledColumnEditorTemplate(e.column);f&&d.find("div").replaceWith(f(c)),c.value="",c.isVisible=!1;var g=new a.Listener(d[0]);g.register_many([{keys:"enter",on_keydown:function(){c.$broadcast("finish-editing"),b(function(){c.moveActiveCellRelative(1,0)})}},{keys:"esc",on_keydown:function(){c.cancelEditing()}}]),c.$watch("activeCellValue()",function(a){c.value=a}),c.$watch("isInEditMode",function(a){c.isVisible=a&&Number(c.activeCellModel.column)===Number(e.column),c.isVisible&&b(function(){c.editModeInputBuffer&&(c.value=c.editModeInputBuffer,c.setEditModeInputBuffer(null)),c.$broadcast("editorFocus")})}),c.cancelEditing=function(){c.value=c.activeCellValue(),c.setActiveMode(!1),c.broadcastInputReady()},c.confirmEditing=function(){var a=c.activeCellModel.row,b=c.activeCellModel.column,d=c.getCellValue(a,b);c.setCellValue(c.value,d),c.gridOptions.onCellValueChange(c.getRow(a),c.getColumnName(b),c.value,d)},c.finishEditing=function(){c.setActiveMode(!1),c.broadcastInputReady()}}},template:'<span ng-show="isVisible"><div></div></span>'}}])}(window.keypress,window.angular),function(a,b){"use strict";function c(a){if("number"==typeof a.selectionStart)a.selectionStart=a.selectionEnd=a.value.length;else if(a.createTextRange){a.focus();var b=a.createTextRange();b.collapse(!1),b.select()}}b.module("connect-grid").directive("gridCellEditorSimpleTextarea",[function(){return{restrict:"E",link:function(a,b){var d=b.find("textarea")[0];a.$on("finish-editing",function(){d.blur()}),b.find("textarea").on("blur",function(){a.confirmEditing(),a.finishEditing()}),a.$on("editorFocus",function(){d.focus(),c(d)})},template:'<textarea ng-model="value" ng-model-options="{ updateOn: \'blur\'}">{{ activeCellValue() }}</textarea>'}}])}(window.keypress,window.angular),function(a,b){"use strict";a.module("connect-grid").directive("connectGrid",["$compile","$timeout",function(a,c){var d={cellWidth:70,cellHeight:26,headerCellHeight:26,selectable:!0,editable:!0,maxWidth:null,maxHeight:null,columnDefs:[],activeCellModifiers:{top:0,left:0,width:0,height:0},getRowClass:function(){},onCellValueChange:function(){},onCellValueBulkChange:function(){},onNewRowPaste:function(){},onNewRowsPaste:function(){},onExistingRowsPaste:function(){},onRowSelect:function(){},activeCellKeyBindings:{},defaultEditableCellTemplate:"<grid-cell-editor-simple-textarea></grid-cell-editor-simple-textarea>"};return{restrict:"E",scope:!0,compile:function(){return{pre:function(e,f,g){var h=e.$eval(g.ngModel),i=e.$eval(g.gridOptions);e.gridOptions=b.extend({},d,i),e.activeCellModel={row:0,column:0},e.scrollLeft=0,e.scrollTop=0,e.isScrolling=!1,e.$watch(g.ngModel,function(){e.$broadcast("gridDataChanged")},!0),e.$on("gridDataChanged",function(){e.resetActiveCell()}),e.$watch("activeCellModel.row",function(a){e.gridOptions.onRowSelect(e.getRow(a))}),e.$on("grid.start-cell-edit",function(a,b){if("obj"in b&&"field"in b){var c=e.getRowIndex(b.obj);if(-1!==c&&c>-1){var d=e.getColumnByFieldName(b.field);if(d){var f=e.getColIndex(d);e.setActiveCell(c,f);var g={};"value"in b&&(g.value=b.value),e.$broadcast("activateCellEditor",g)}}}}),e.rows=function(){return b.range(h.length)},e.columns=function(){return e.gridOptions.columnDefs},e.getRow=function(a){return h[a]},e.getRowIndex=function(a){return b.indexOf(h,a)},e.getColIndex=function(a){return b.indexOf(e.columns(),a)},e.getColumnByFieldName=function(a){return b.findWhere(e.columns(),{field:a})},e.getColumnName=function(a){var b=e.columns()[a];return"field"in b?b.field:void 0},e.getCompiledColumnCellTemplate=function(b){var c=e.columns()[b];return"cellTemplate"in c?a(c.cellTemplate):void 0},e.getCompiledColumnEditorTemplate=function(b){var c=e.columns()[b];return a("editableCellTemplate"in c?c.editableCellTemplate:e.gridOptions.defaultEditableCellTemplate)},e.isColumnSelectable=function(a){var b=e.columns()[a];return b&&"selectable"in b?Boolean(b.selectable):!0},e.isColumnEditable=function(a){var b=e.columns()[a];return b&&"editable"in b?Boolean(b.editable):!0},e.getClosestSelectableColumn=function(a,b){var c,d,f=b>a?-1:1;if(1===f){for(c=a,d=e.columns().length;d>c;c+=1)if(e.isColumnSelectable(c))return c}else for(c=a;c>-1;c-=1)if(e.isColumnSelectable(c))return c;return b},e.px=function(a){return a+"px"},e.getDimensionsLimiterWidth=function(){return f[0].getElementsByClassName("grid__dimensions-limiter")[0].offsetWidth},e.getGridMaxWidth=function(){return null===e.gridOptions.maxWidth?"auto":e.px(e.gridOptions.maxWidth)},e.getGridMaxHeight=function(){return null===e.gridOptions.maxHeight?"auto":e.px(e.gridOptions.maxHeight)},e.getCellWidth=function(a,b){var c=e.columns();return c[b]&&"width"in c[b]?c[b].width:e.gridOptions.cellWidth},e.getTotalWidth=function(){var a=0,c=e.columns();return b.each(c,function(b,c){a+=e.getCellWidth(0,c)}),a},e.getCellHeight=function(){return e.gridOptions.cellHeight},e.getCellCoordinates=function(a,b){for(var c=0,d=0;b>d;d++)c+=e.getCellWidth(a,d);return{top:a*e.gridOptions.cellHeight+e.gridOptions.headerCellHeight,left:c,width:e.getCellWidth(a,b),height:e.getCellHeight(a,b)}},e.getCellValue=function(a,b){var c=e.columns();return h[a]&&c[b]&&"field"in c[b]?h[a][c[b].field]:null},e.getCellClass=function(a,c){var d=e.columns();if(d[c]&&"cellClass"in d[c]){if(b.isFunction(d[c].cellClass)){var f=e.getCellValue(a,c);return d[c].cellClass(f,e.getRow(a),a,c,e)}return d[c].cellClass}return null},e.getRowClass=function(a){return e.gridOptions.getRowClass(e.getRow(a),a)},e.renderCellContent=function(a,c){var d=e.getCellValue(a,c),f=e.columns();return f[c]&&"renderer"in f[c]?f[c].renderer(d,e.getRow(a),a,c,e):b.isUndefined(d)?"":d},e.getIfHintVisible=function(a,b){var c=e.columns();if(c[b]&&"isHintVisible"in c[b]){var d=e.getCellValue(a,b),f=e.getRow(a);return c[b].isHintVisible(d,f,a,b,e)}return!1},e.getHintTemplateSrc=function(a,b){var c=e.columns();if(c[b]&&"hintTemplateSrc"in c[b]){var d=e.getCellValue(a,b),f=e.getRow(a);return c[b].hintTemplateSrc(d,f,a,b,e)}},e.renderCellHeader=function(a){var b=e.columns();return b[a]&&"displayName"in b[a]?b[a].displayName:b[a]&&"field"in b[a]?b[a].field:""},e.resolveFieldValue=function(a,b,c){var d=e.columns();if(d[b]&&"field"in d[b]&&"valueResolver"in d[b]){var f=null!==a?e.getRow(a):null;c=d[b].valueResolver(c,f,a,b,e)}return c},e.updateCellValue=function(a,b,d){var f=e.columns();if(f[b]&&"field"in f[b]){var g=e.resolveFieldValue(a,b,d);return h[a][f[b].field]=g,c(function(){e.$broadcast("cell-value-changed-"+a+"-"+b,{newValue:g})}),g}},e.setActiveCell=function(a,b){var c=Math.min(Math.max(a,0),e.rows().length-1),d=Math.min(Math.max(b,0),e.columns().length-1);e.isColumnSelectable(d)||(d=e.getClosestSelectableColumn(d,e.activeCellModel.column)),e.activeCellModel.row=c,e.activeCellModel.column=d,e.$broadcast("active-cell-set"),e.broadcastInputReady()},e.resetActiveCell=function(){e.setActiveCell(e.activeCellModel.row,e.activeCellModel.column)},e.readingInputStarted=function(){e.$broadcast("is-reading-input-change",!0)},e.readingInputStopped=function(){e.$broadcast("is-reading-input-change",!1)},e.setGridIsScrolling=function(a){e.isScrolling=a,e.$broadcast("grid-is-scrolling",a)},e.setGridScrollLeft=function(a){e.scrollLeft=a},e.setGridScrollTop=function(a){e.scrollTop=a},e.broadcastInputReady=function(){e.$broadcast("grid-input-ready")}},post:function(a,b){b.on("click",function(){a.broadcastInputReady()})}}},template:'<div class="grid__wrap">\n    <div class="grid__dimensions-limiter" grid-scroll-tracker ng-style="{width: getGridMaxWidth(), height: getGridMaxHeight()}">\n        <div class="grid__cells-total-dimensions" ng-style="{width: px(getTotalWidth())}">\n            <div class="grid__headers-container">\n                <div ng-repeat="column in columns()" class="grid__header-cell"\n                     ng-style="{ width: px(getCellWidth($parent.$index, $index)), height: px(gridOptions.headerCellHeight) }">\n                    <grid-header-cell row="{{ $parent.$index }}" column="{{ $index }}"></grid-header-cell>\n                </div>\n            </div>\n            <div class="grid__rows-container">\n                <div ng-repeat="row in rows() track by $index" class="grid__row" ng-class="getRowClass(row)">\n                    <div ng-repeat="column in columns() track by $index" class="grid__cell"\n                         ng-style="{ width: px(getCellWidth($parent.$index, $index)), height: px(getCellHeight($parent.$index, $index)) }">\n                        <grid-cell row="{{ $parent.$index }}" column="{{ $index }}"></grid-cell>\n                    </div>\n                </div>\n\n                <grid-active-cell ng-model="activeCellModel"\n                                  ng-class="{ \'grid-active-cell--is-active\': isReadingInput }"></grid-active-cell>\n                <grid-input-reader></grid-input-reader>\n            </div>\n        </div>\n    </div>\n    <cell-hints>\n        <active-cell-hint></active-cell-hint>\n    </cell-hints>\n</div>'}}])}(window.angular,window._),function(a){"use strict";a.module("connect-grid").directive("gridHeaderCell",[function(){return{restrict:"E",require:"?ngModel",link:function(a,b,c){b.on("click",function(){a.setActiveCell(c.row,c.column)})},template:'<div class="grid__header-cell__content">{{ renderCellHeader($index) }}</div>'}}])}(window.angular),function(a){"use strict";a.module("connect-grid").factory("gridInputParser",[function(){return{isTabularData:function(a){return String(a).indexOf("\n")>-1||String(a).indexOf("	")>-1},getRows:function(a){return String(a).split("\n")},getColumns:function(a){return String(a).split("	")}}}])}(window.angular),function(a){"use strict";a.module("connect-grid").directive("gridInputReader",["$rootScope","$timeout","gridInputParser",function(a,b,c){return{restrict:"E",require:"?ngModel",link:function(a,b){a.input="",a.textAreaPosition="absolute",a.editorTopPosition=function(){var b=a.getCellCoordinates(a.activeCellModel.row,a.activeCellModel.column);return b.top},a.editorLeftPosition=function(){var b=a.getCellCoordinates(a.activeCellModel.row,a.activeCellModel.column);return b.left},a.$watch("input",function(b,d){if(b!==d&&b.length>0){if([].forEach&&c.isTabularData(b)){var e=[],f=[];return c.getRows(b).forEach(function(b,d){var g=a.activeCellModel.row+d;if(g>-1){var h=!!a.getRow(g),i={},j={row:a.getRow(g),changes:[]};c.getColumns(b).forEach(function(b,c){var d=a.activeCellModel.column+c;if(h){var e=a.getCellValue(g,d),f=a.updateCellValue(g,d,b),k=a.getColumnName(d);a.gridOptions.onCellValueBulkChange(j.row,k,f,e),j.changes.push({columnName:k,newValue:f,oldValue:e})}else{var l=a.columns()[d];l&&l.field&&(i[l.field]=a.resolveFieldValue(null,d,b))}}),h?f.push(j):(a.gridOptions.onNewRowPaste(i),e.push(i))}}),f.length>0&&a.gridOptions.onExistingRowsPaste(f),e.length>0&&a.gridOptions.onNewRowsPaste(e),void(a.input="")}a.$broadcast("activateCellEditor",{value:b}),a.input=""}}),b.find("textarea").on("focus",function(){a.readingInputStarted()}),b.find("textarea").on("blur",function(){a.readingInputStopped()}),a.$watch("activeCellModel",function(){d()},!0),b.on("dblclick",function(){a.setActiveMode(!0)});var d=function(){var c=b.find("textarea")[0];c.value=a.renderCellContent(a.activeCellModel.row,a.activeCellModel.column),setTimeout(function(){c.select()},0)};a.$on("grid-input-ready",d)},template:'<textarea ng-model="input" ng-style="{ top: px(editorTopPosition()), left: px(editorLeftPosition()), position: textAreaPosition}"></textarea>'}}])}(window.angular),function(a,b){"use strict";a.module("connect-grid").directive("gridScrollTracker",[function(){return{restrict:"A",scope:!0,link:function(a,c){var d=function(){a.setGridIsScrolling(!0)},e=b.once(d),f=b.debounce(function(){a.setGridIsScrolling(!1),e=b.once(d)},1e3);c.length>0&&c.on("scroll",function(){a.setGridScrollLeft(c[0].scrollLeft),a.setGridScrollTop(c[0].scrollTop),e(),f()})}}}])}(window.angular,window._);